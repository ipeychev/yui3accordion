<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>YUI3 Accordion widget - build from markup</title>

        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.0.0b1/build/cssreset/reset-min.css">
        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.0.0b1/build/cssfonts/fonts-min.css">

        <link type="text/css" rel="stylesheet" href="syntaxhighlighter/styles/shCore.css">
        <link type="text/css" rel="stylesheet" href="syntaxhighlighter/styles/shThemeDefault.css">

        <style type="text/css">
            html, body {
                height:100%;
            }

            .step {
                position: relative;
                border: 2px solid #E5ECF9;
                background-color: #F2FBFF;
                margin:0 0 0 0px;
                padding: 1em 1em 2em 1em;
            }

            h1 {
                font-size: 170%;
                line-height: 130%;
                margin:0 0 0 0px;
                padding: 1em 0.5em 1em;
            }

            h2 {
                font-size:150%;
                font-weight:bold;
                margin:1.5em 0 0;
                top:0;
            }

            h3 {
                font-size:130%;
                font-weight:bold;
                margin:1.5em 0 0;
                top:0;
            }

            h4 {
                font-size:110%;
                font-weight:bold;
                margin:1.5em 0 0;
                top:0;
            }

            li {
                background: transparent url(images/arrow_right.png) no-repeat scroll 0px 0px;
                list-style-image:none;
                list-style-position:outside;
                list-style-type:none;
                margin:0;
                padding:0 0 0 20px;
            }

            #item2 .customiconclass {
                background-image: url("http://github.com/ipeychev/yui3accordion/raw/master/build/accordion/assets/skins/sam/accordion_sprite.png");
                background-repeat: no-repeat;
                background-position: center -83px;
            }
        </style>



        <script type="text/javascript" src="http://yui.yahooapis.com/3.0.0b1/build/yui/yui-min.js"></script>

        <script type="text/javascript" src="syntaxhighlighter/scripts/shCore.js"></script>
        <script type="text/javascript" src="syntaxhighlighter/scripts/shBrushCss.js"></script>
        <script type="text/javascript" src="syntaxhighlighter/scripts/shBrushJScript.js"></script>
        <script type="text/javascript" src="syntaxhighlighter/scripts/shBrushXml.js"></script>

        <script type="text/javascript">
            SyntaxHighlighter.config.clipboardSwf = 'syntaxhighlighter/scripts/clipboard.swf';
            SyntaxHighlighter.all();

            YUI({
                combine: true,
                modules: {
                    'accordion-css' : {
                        type: 'css',
                        fullpath: 'http://github.com/ipeychev/yui3accordion/raw/master/build/accordion/assets/skins/sam/accordion.css'
                    },
                    'accordion': {
                        type: 'js',
                        fullpath: 'http://github.com/ipeychev/yui3accordion/raw/master/build/accordion/accordion-min.js',
                        requires: [ 'accordion-css', 'widget-stdmod', 'anim-easing', 'dd-constrain', 'dd-proxy', 'dd-drop', 'event' ]
                    }
                }
            } ).use( "accordion", function(Y) {


            });

            //////////////////////////////////////////////////////////////////////////////////////////

        </script>
    </head>
    <body class="yui-skin-sam">

        <div class="step">

            <div style="float:right; position:relative;">
                <h3>
                    <a href="build_from_markup_window.html" target="_blank">See the this example in new window.</a>
                </h3>
            </div>

            <h1>Step one: create accordion module</h1>

            <p>
		In order to use Accordion widget, you have to add it as module in your YUI instance. You have to define two modules - one for its js and second one about its css.
		Let's name them 'accordion' and 'accordion-css'. You have to specify also the full path to accordion js file. Here we will load it from GitHub.
		Of course, we must load YUI3 core file also.
            </p>

            <pre class="brush: html;">
			<script type="text/javascript" src="http://yui.yahooapis.com/3.0.0b1/build/yui/yui-min.js"></script>
            </pre>


        <pre class="brush: js;">
YUI({
    combine: true,
    modules: {
        'accordion-css' : {
            type: 'css',
            fullpath: 'http://github.com/ipeychev/yui3accordion/raw/master/build/accordion/assets/skins/sam/accordion.css'
        },
        'accordion': {
            type: 'js',
            fullpath: 'http://github.com/ipeychev/yui3accordion/raw/master/build/accordion/accordion-min.js',
            requires: [ 'accordion-css', 'widget-stdmod', 'anim-easing', 'dd-constrain', 'dd-proxy', 'dd-drop', 'event' ]
        }
    }
} ).use( 'accordion', function(Y) {

});
        </pre>
    </div>

    <div class="step">
        <h1>Step two: define the markup of the accordion and (optionally) of its items</h1>

        <p>
	In this example, we will create markup for accordion itself and three items.
        </p>

        <h3>1. Create Accordion container:</h3>
        <p>
	In this example, we will set also position, height and "overflow:hidden" for IE in case of quirks mode.<br>
        </p>
        <pre class="brush: html">
        <div id="acc1" style="position: relative; height: 550px; overflow:hidden;"> <!-- IE needs these styles in quirks mode -->
        .......
        </div>
        </pre>
        <br>
	For each item, we have to create standard markup as for regular widget, with some additional settings. These are:

        <h3>2. Set class "yui-accordion-item" in the main item's div:</h3>
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item">
	........
	</div>
        </pre>

        <h3>3. Set class "yui-accordion-item-expanded" in the main item's div to make this item expanded:</h3>
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item yui-accordion-item-expanded">
	........
	</div>
        </pre>

        <h3>4. Set class "yui-accordion-item-alwaysvisible" to make this item always visible by default:</h3>
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item yui-accordion-item-alwaysvisible">
	........
	</div>
        </pre>

        <h3>5. Setting class "yui-accordion-item-closable" will allow user to close this item:</h3>
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item yui-accordion-item-closable">
	........
	</div>
        </pre>

        <h3>6. Define content height policy</h3>
        <h4>You can set content height in three ways:</h4>
        <ol>
            <li>auto - this means the height will be as is being calculated from browser</li>
            <li>fixed - the content height will be exactly X pixels</li>
            <li>stretch - the height will be calculated, based on the height of the other items in the Accordion</li>
        </ol>
        <h4>You have to add three different classes to item for each possible content height value. These are:</h4>
        <ol>
            <li>for auto - yui-accordion-item-contentheight-auto</li>
            <li>for fixed - yui-accordion-item-contentheight-fixed-[pixels], where "[pixels]" is number, for example 150</li>
            <li>for stretch - yui-accordion-item-contentheight-stretch</li>
        </ol>

        <h4>Example1 - markup for expanded item with content height set as fixed, 200px</h4>
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item yui-accordion-item-expanded yui-accordion-item-contentheight-fixed-200">
	........
	</div>
        </pre>

        <h4>Example2 - markup for always visible item with content height set as stretch</h4>
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item yui-accordion-item-alwaysvisible yui-accordion-item-contentheight-stretch">
	........
	</div>
        </pre>

        <h3>7. Set markup for item's label (optionally)</h3>
        <pre class="brush: html;">
        <div class="yui-widget-hd">
            <div class="yui-accordion-item-label">Label 1</div>
        </div>
        </pre>

        <h3>8. Set custom icon instead those, which the item provides by default (optionally):</h3>
        <pre class="brush: html;">
        <div class="yui-widget-hd">
            <div class="yui-accordion-item-icon customiconclass"></div>
        </div>
        </pre>
	The custom class is defined in this way:
        <pre class="brush: css;">
#item2 .customiconclass {
    background-image: url("http://github.com/ipeychev/yui3accordion/raw/master/build/accordion/assets/skins/sam/accordion_sprite.png");
    background-repeat: no-repeat;
    background-position: center -83px;
}
        </pre>

        <p>
	Here is the whole markup of the Accordion:
        </p>
        <pre class="brush: html;">
<!-- Accordion markup -->
<div id="acc1" style="position: relative; height: 550px; overflow:hidden;"> <!-- IE needs these styles in quirks mode -->
    <div id="item1" class="yui-accordion-item yui-accordion-item-contentheight-fixed-150 yui-accordion-item-alwaysvisible yui-accordion-item-closable">
        <div class="yui-widget-hd">
            <div class="yui-accordion-item-label">Label 1</div>
        </div>
        <div class="yui-widget-bd">
            <div id="pm1" style="position: relative;">
                Item1 content...
            </div>
        </div>
    </div>

    <div id="item2" class="yui-accordion-item yui-accordion-item-contentheight-stretch yui-accordion-item-expanded">
        <div class="yui-widget-hd">
            <div class="yui-accordion-item-label">Label 2</div>
            <div class="yui-accordion-item-icon customiconclass">
            </div>
        </div>
        <div id="bodyid2" class="yui-widget-bd">
            <div id="pm2" style="position:relative">
                Item2 content...
            </div>
        </div>
    </div>

    <div id="item3" class="yui-accordion-item yui-accordion-item-contentheight-auto yui-accordion-item-expanded">
        <div class="yui-widget-hd">
            <div class="yui-accordion-item-label">Label 3 from markup</div>
        </div>
        <div id="bodyid3" class="yui-widget-bd">
            <div id="pm3" style="position:relative;">
                Item3 content..
            </div>
        </div>
    </div>
</div>
        </pre>
    </div>

    <div class="step">
        <h1>Step three: instantiate the Accordion</h1>
        <p>
	When YUI3 finishes loading all scripts, it will execute a function, passed as last argument of YUI "use" function. This is the right place you have to start creating instances, including those of the Accordion.
	You can instantiate Accordion as any other widget in YUI3:
        </p>

        <pre class="brush: js;">
var _accordion = new Y.Accordion( {
    contentBox: "#acc1",
    useAnimation: true,
    collapseOthersOnExpand: true
});
        </pre>
    </div>

    <div class="step">
        <h1>Step four (optional): add/modify params of the items before add them to Accordion</h1>

        <h4>If you subscribe to "beforeItemAdd" event, you will be able to overwrite all parameters, added from markup or to add new:</h4>

        <pre class="brush: js;">
_accordion.on( "beforeItemAdd", function( _attrs ){
    var _item, _id;

    _item = _attrs.item;
    _id = _item.get( "contentBox" ).get( "id" );

    if( _id === "item1" ){
        _item.set( "contentHeight",  {
            method: "fixed",
            height: 150 <!-- In pixels -->
        });

        _item.set( "alwaysVisible", true );  // this means that the item will be also expanded after render

        _item.set( "closable", true );
    } else if( _id === "item2" ){
        _item.set( "label", "Label2" ); // there is no label in markup for this item, so we set it here

        _item.set( "contentHeight",  {
            method: "stretch"
        });

       _item.set( "expanded", true );
    } else if( _id === "item3" ){
        _item.set( "label", "Label3, overwritten" ); // we overwrite the label from markup

        _item.set( "contentHeight",  {
            method: "auto"
        });

        _item.set( "expanded", true );
    }
}, this );
        </pre>
    </div>

    <div class="step">
        <h1>Step five: render the Accordion</h1>

        <p>
	The last step is to render the accordion. Render process will look for some items and if found, they will be created authomatically. In this example, there will be created three items.
        </p>
        <pre class="brush: js;">
	 _accordion.render();
        </pre>
    </div>


<h3><a href="build_from_markup_window.html" target="_blank">See the this example in new window.</a></h3>

</body>

</html>
