<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>YUI3 Accordion widget - build from markup</title>

        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.0.0/build/cssreset/reset-min.css">
        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.0.0/build/cssfonts/fonts-min.css">

        <link type="text/css" rel="stylesheet" href="syntaxhighlighter/styles/shCore.css">
        <link type="text/css" rel="stylesheet" href="syntaxhighlighter/styles/shThemeDefault.css">

        <style type="text/css">
            html, body {
                height:100%;
            }

            .step {
                position: relative;
                border: 2px solid #E5ECF9;
                background-color: #F2FBFF;
                margin:0 0 0 0px;
                padding: 1em 1em 2em 1em;
            }

            h1 {
                font-size: 170%;
                line-height: 130%;
                margin:0 0 0 0px;
                padding: 1em 0.5em 1em;
            }

            h2 {
                font-size:150%;
                font-weight:bold;
                margin:1.5em 0 0;
                top:0;
            }

            h3 {
                font-size:130%;
                font-weight:bold;
                margin:1.5em 0 0;
                top:0;
            }

            h4 {
                font-size:110%;
                font-weight:bold;
                margin:1.5em 0 0;
                top:0;
            }

            li {
                background: transparent url(images/arrow_right.png) no-repeat scroll 0px 0px;
                list-style-image:none;
                list-style-position:outside;
                list-style-type:none;
                margin:0;
                padding:0 0 0 20px;
            }
            
        </style>



        <script type="text/javascript" src="http://yui.yahooapis.com/3.0.0/build/yui/yui-min.js"></script>

        <script type="text/javascript" src="syntaxhighlighter/scripts/shCore.js"></script>
        <script type="text/javascript" src="syntaxhighlighter/scripts/shBrushCss.js"></script>
        <script type="text/javascript" src="syntaxhighlighter/scripts/shBrushJScript.js"></script>
        <script type="text/javascript" src="syntaxhighlighter/scripts/shBrushXml.js"></script>

        <script type="text/javascript">
            SyntaxHighlighter.config.clipboardSwf = 'syntaxhighlighter/scripts/clipboard.swf';
            SyntaxHighlighter.all();
        </script>
    </head>
    <body class="yui-skin-sam">

        <div class="step">

            <div style="float:right; position:relative;">
                <h3>
                    <a href="build_from_markup_window.html" target="_blank">See the this example in new window.</a>
                </h3>
            </div>

            <h1>Step one: add Accordion to your YUI instance</h1>

            <p>
                In order to use Accordion widget, you have to add it as external module in your YUI instance or include the JavaScript and CSS manually on the page:
            </p>

            <pre class="brush: html;">
<link rel="stylesheet" type="text/css" href="http://github.com/ipeychev/yui3accordion/raw/master/build/accordion/assets/skins/sam/accordion.css">

<script type="text/javascript" src="http://yui.yahooapis.com/3.0.0/build/yui/yui-min.js"></script>
<script type="text/javascript" src="http://github.com/ipeychev/yui3accordion/raw/master/build/accordion/accordion-min.js"></script>

<script type="text/javascript">
    YUI().use( 'accordion', function(Y) {
        // Your code here
    });
</script>
            </pre>
    </div>

    <div class="step">
        <h1>Step two: define the markup of the accordion and (optionally) its items</h1>

        <p>
	In this example, we will create markup for accordion itself and three items.
        </p>

        <h3>1. Create Accordion container:</h3>
        <p>
            We have to define Widget's contentBox and boundingBox. In boundingBox, we set the following class: <code>"yui-accordion"</code><br/>
            In this example, we will set also position, height and "overflow:hidden" for IE in case of quirks mode.<br/>
        </p>
        <pre class="brush: html">
        <div id="boundingBox1" class="yui-accordion">
            <div id="contentBox1" style="position: relative; height: 420px; overflow:hidden;"> <!-- IE needs these styles in quirks mode -->
                ........
            </div>
        </div>
        </pre>
        <br>
	
        For each item, we have to create standard markup as for regular widget, with some additional settings:

        <h3>2. Set class <code>"yui-accordion-item"</code> in the main item's div:</h3>
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item">
	........
	</div>
        </pre>

        <h3>3. Set item header markup</h3>
        When building Accordion items from markup, it is preferable to add the required markup for the header. In this way, if JavaScript is disabled, the headers will look in the same way, as if it would be enabled.<br/>
        To do that, place inside standard Widget's header definition the following HTML elements with their classes.
        <h4>Note:</h4>
        This is optional, you can omit all the HTML in header definition (even the whole header) and AccordionItem will create it. Also, you can set only some of these HTML elements. What is missing, will be created when AccordionItem renders.
        <p>
            In the example below we also set the label of the item - "Label 1".
        </p>
        
        <pre class="brush: html;">
        <div class="yui-widget-hd">
            <a class="yui-accordion-item-icon"></a>
            <a class="yui-accordion-item-label">Label 1</a>
            <div class="yui-accordion-item-icons">
                <a class="yui-accordion-item-iconalwaysvisible"></a>
                <a class="yui-accordion-item-iconexpanded"></a>
                <a class="yui-accordion-item-iconclose"></a>
            </div>
        </div>
        </pre>

        
        <h3>4. Set AccordionItem properties</h3>
        <p>
        There are two ways to set properties to AccordionItem from markup. You may use each of them separately or both in the same time.<br/>
        </p>

        <ol>
            <li>use predefined fake class names</li>
            <li>store properties as JSON string in <code>"yuiConfig"</code> custom attribute</li>
        </ol>
        <br/>
        <p>
            If you use <code>yuiConfig</code> attribute, you can set every property, which AccordionItem supports. If you use fake class names, you can set the following properties:<br/>
        </p>
        <ol>
            <li><code>expanded</code></li>
            <li><code>alwaysVisible</code></li>
            <li><code>contentHeight</code></li>
            <li><code>closable</code></li>
        </ol><br/>
        Below we show how to use both ways:

        <h4>4.1 Set <code>"expanded"</code> property</h4>
        In order to set <code>"expanded"</code> property to <code>true</code> (it is false by default), you may set fake class "yui-accordion-item-expanded" in the main item's div:
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item yui-accordion-item-expanded">
	........
	</div>
        </pre>

        <p>
        or you may set "expanded" to true in <code>yuiConfig</code> attribute:
        <pre class="brush: html;">
        <div id="item1" class="yui-accordion-item" yuiConfig='{"expanded": true}'>
             ........
        </div>
        </pre>
        <p>

        <h4>4.2 Set <code>"alwaysVisible"</code> property</h4>
        Use "yui-accordion-item-alwaysvisible" class name to make this item always visible:
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item yui-accordion-item-alwaysvisible">
	........
	</div>
        </pre>
        or set <code>{"alwaysVisible": true}</code> in <code>yuiConfig</code> property:
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item" yuiConfig='{"alwaysVisible": true}'>
	........
	</div>
        </pre>

        <h4>4.3 Set <code>"closable"</code> property</h4>
        Use "yui-accordion-item-closable" class name in order to make the item closable:
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item yui-accordion-item-closable">
	........
	</div>
        </pre>
        or set <code>"closable"</code> to true in <code>yuiConfig</code> attribute:
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item" yuiConfig='{"closable": true}'>
	........
	</div>
        </pre>
        
        <h4>4.4 Define content height policy</h4>
        <h4>You can set content height of given item in three ways:</h4>
        <ol>
            <li>auto - the browser will calculate content height</li>
            <li>fixed - content height will be exactly X pixels</li>
            <li>stretch - content height will be calculated, based on the height of the other items in the Accordion. For example, lets assume there is Accordion with total height 600px and it has three items added. The content height of the first item is fixed, 200px and the second one is also fixed, 100px. Content height policy of the third item is stretch and it will get the remaining space, which is:<br/>
            600 - 25 - 200 - 25 - 100 - 25 = 225px, if we assume 25 is header height in pixels for each item</li>
        </ol>
        <h4>In order to set content height policy, you can use fake class names, or JSON string in yuiConfig property:</h4>
        <p>Using fake class names:</p>
        <ol>
            <li>for auto - <code>"yui-accordion-item-contentheight-auto"</code></li>
            <li>for fixed - <code>"yui-accordion-item-contentheight-fixed-[pixels]"</code>, where "[pixels]" is number, for example 150</li>
            <li>for stretch - <code>"yui-accordion-item-contentheight-stretch"</code></li>
        </ol>
        <br/>
        <p>Using <code>"yuiConfig"</code> custom attribute:</p>
        <ol>
            <li>for auto - <code>yuiConfig='{"contentHeight": {"method":"auto"}}'</code></li>
            <li>for fixed - <code>yuiConfig='{"contentHeight": {"method":"fixed", "height":[pixels]}}'</code>, where "[pixels]" is number, for example 150</li>
            <li>for stretch - <code>yuiConfig='{"contentHeight": {"method":"stretch"}}'</code></li>
        </ol>

        <h4>Example - markup for expanded item with content height set as fixed, 200px by using fake class names:</h4>
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item yui-accordion-item-expanded yui-accordion-item-contentheight-fixed-200">
	........
	</div>
        </pre>

        <h4>Example - markup for always visible item with content height set as stretch by using yuiConfig attribute:</h4>
        <pre class="brush: html;">
	<div id="item1" class="yui-accordion-item" yuiConfig='{"contentHeight": {"method":"stretch"}, "alwaysVisible":true}'>
	........
	</div>
        </pre>

        <h3>4.5 Set item's label (optionally)</h3>
        You can define it in header's markup, or set it in <code>"yuiConfig"</code> attribute<br/>

        <pre class="brush: html;">
        <div id="item1" class="yui-accordion-item">
             <div class="yui-widget-hd">
                <a class="yui-accordion-item-label">Label 1</a>
            </div>
        </div>


        <div id="item1" class="yui-accordion-item" yuiConfig='{"label": "Label 1"}'>
        </div>
        </pre>


	<h3>Here is example markup of Accordion with three items:</h3>
        <pre class="brush: html;">
        <div id="boundingBox1" class="yui-accordion">
            <div id="contentBox1" style="position: relative; height: 420px; overflow:hidden;">
                <div id="item1" class="yui-accordion-item yui-accordion-item-alwaysvisible" yuiConfig='{"contentHeight": {"method":"fixed", "height":150}, "closable": true}'>
                    <div class="yui-widget-hd">
                        <a class="yui-accordion-item-icon"></a>
                        <a class="yui-accordion-item-label">Label 1</a>
                        <div class="yui-accordion-item-icons">
                            <a class="yui-accordion-item-iconalwaysvisible"></a>
                            <a class="yui-accordion-item-iconexpanded"></a>
                            <a class="yui-accordion-item-iconclose"></a>
                        </div>
                    </div>
                    <div class="yui-widget-bd">
                        <div id="pm1" style="position: relative;">
                            Item1 content
                        </div>
                    </div>
                </div>

                <div id="item2" class="yui-accordion-item yui-accordion-item-contentheight-stretch" yuiConfig='{"expanded": true}'>
                    <div class="yui-widget-hd">
                        <a class="yui-accordion-item-icon"></a>
                        <a class="yui-accordion-item-label">Label 2</a>
                        <div class="yui-accordion-item-icons">
                            <a class="yui-accordion-item-iconalwaysvisible"></a>
                            <a class="yui-accordion-item-iconexpanded"></a>
                            <a class="yui-accordion-item-iconclose"></a>
                        </div>
                    </div>
                    <div id="bodyid2" class="yui-widget-bd">
                        <div id="pm2" style="position:relative">
                            Item2 content
                        </div>
                    </div>
                </div>

                <div id="item3" class="yui-accordion-item" yuiConfig='{"contentHeight": {"method": "auto"}, "expanded":true}'>
                    <div class="yui-widget-hd">
                        <a class="yui-accordion-item-icon"></a>
                        <a class="yui-accordion-item-label">Label 3 from markup</a>
                        <div class="yui-accordion-item-icons">
                            <a class="yui-accordion-item-iconalwaysvisible"></a>
                            <a class="yui-accordion-item-iconexpanded"></a>
                            <a class="yui-accordion-item-iconclose"></a>
                        </div>
                    </div>
                    <div id="bodyid3" class="yui-widget-bd">
                        <div id="pm3" style="position:relative;">
                            Item3 content
                        </div>
                    </div>
                </div>
           </div>
       </div>
        </pre>
    </div>

    <div class="step">
        <h1>Step three: instantiate the Accordion</h1>
        <p>
	When YUI3 finishes loading all scripts, it will execute a function, passed as last argument of YUI "use" function. This is the right place you have to start creating instances, including those of the Accordion.
	You can instantiate Accordion as any other widget in YUI3:
        </p>

        <pre class="brush: js;">
var accordion = new Y.Accordion( {
    boundingBox: "#boundingBox1",
    contentBox: "#contentBox1",
    useAnimation: true,
    collapseOthersOnExpand: true
});
        </pre>
    </div>

    <div class="step">
        <h1>Step four (optional): add/modify item params right before adding them to Accordion</h1>

        <h4>If you subscribe to "beforeItemAdd" event, you will be able to overwrite all parameters, added from markup or to add new parameters:</h4>

        <pre class="brush: js;">
accordion.on( "beforeItemAdd", function( attrs ){
    var item, id;

    item = attrs.item;
    id = item.get( "contentBox" ).get( "id" );

    if( id === "item1" ){
        item.set( "contentHeight",  {
            method: "fixed",
            height: 150 <!-- In pixels -->
        });

        item.set( "alwaysVisible", true );

        item.set( "closable", true );
    } else if( id === "item2" ){
        item.set( "label", "Label2" );

        item.set( "contentHeight",  {
            method: "stretch"
        });

       item.set( "expanded", true );
    } else if( id === "item3" ){
        item.set( "label", "Label3, overwritten" );

        item.set( "contentHeight",  {
            method: "auto"
        });

        item.set( "expanded", true );
    }
}, this );
        </pre>
    </div>

    <div class="step">
        <h1>Step five: render the Accordion</h1>

        <p>
	The last step is to render the accordion. Render process will look for some items and if found, they will be created authomatically. In this example, there will be created three items.
        </p>
        <pre class="brush: js;">
	 accordion.render();
        </pre>
    </div>


<h3><a href="build_from_markup_window.html" target="_blank">See the this example in new window.</a></h3>

</body>

</html>
